### Автор
Андрей Тищенко

### Генерация комнат
Есть два больших актора `BP_EasyLvlLayout` и `BP_HardvlLayout`, которые состоят из:
- Пола, потолка и стен;
- `BP_WaitingRoom`, в которой игрок находится несколько секунд до начала игры на уровне;
- `BP_RandomStuff`, которая состоит из 4 элементов (каждый из который с 33% шансом может не присутствовать);
- `BP_EnemySpawner` (easy и hard для простого и сложного уровня соответственно). Это кусок пола, на котором с некоторой вероятностью появляется враг (80% для сложного и 50% для простого);
- `BP_ExitGenerator` (easy и hard для простого и сложного уровня соответственно). Это комната с порталами, в которой с некоторой вероятностью может появиться магазин (50% для сложного и 75% для простого).

### Изменения уровня сложности
На сложных уровнях в среднем должно быть больше врагов (из-за большей вероятности появления, описанной ранее). Также на сложном уровне есть ловушка-лазер, мгновенно убивающая игрока при коллизии.

### Дополнительные задачи
Сделал ловушку-лазер.

### Как поиграть

Запустить `Lvl_Main`. В этом уровне игрок находится в комнате с порталами: голубой для простого уровня и краcный - для сложного. Для попадания на уровень нужно войти в портал.

### Характеристики игрока

В начале игры у игрока 100 единиц здоровья, пистолет с 12 патронами, 18 патронов в запасе и 0$. Здоровье можно пополнить в магазине (1 единица здоровья за 1$), в целях экономии времени здоровье пополняется на максимально возможное значение после одного нажатия (пока есть $ или недостающее здоровье). Патроны можно купить в магазине (1$ за штуку) или получить 12 из ящика с припасами (может выпасть с противника). $ можно получить, подбирая монетки (всегда выпадают с противнков), за одну монетку даётся 15$.

### Оружие

Пистолет. Стреляет на ЛКМ и тратит 1 патрон. В магазине 12 патронов. Перезарядка вручную (горячая клавиша `R`), или автоматическая, когда в магазине не осталось патронов. Перезарядка расходует патроны из запаса игрока и заполняет ими магазин.

Уровни состоят из трёх этажей (на втором этаже сложного уровня располагается лазер, убивающий игрока прикосновением). На нижнем уровне будет комната с порталом, где иногда будет расположен магазин.

### Магазин

Моделька у него замечательная: конус на цилиндре. При нахождении рядом показывается виджет, содержащий две надписи: [H] Heal под полоской здоровья и [B] Buy над количеством патронов. Нажатие [H] вылечит 
персонажа игрока на `min(кол-во $, недостающее здоровье)` и потратит столько же $. Нажатие на [B] при наличии хотя бы одного $ отнимет 1$ и добавит 1 патрон в запас (можно нажимать многократно).

### Враги
На уровне можно встретить врагов, которые будут пытаться стрелять в игрока. Чтобы убить врага, по нему нужно попасть тремя выстрелами. Снаряды врагов нанесят игроку 25 урона.

### Босс
При переходе на последний уровень через любой портал, игрок попадёт в комнату с боссом (коробка, внутри которой есть босс и ничего больше). Комната с боссом не зависит от выбора сложности игрока (простой или сложный путь).

Босс - враг с другой моделькой и большим ростом. Для убийства необходимо попасть 15 выстрелами. Радиусы обнаружения и стрельбы у босса намного больше, чем у рядовых мобов, стреляет он очередями по три снаряда (25 урона каждый). При убийстве босса выводится сообщение о победе, после чего игрока переносит в стартовую комнату `Lvl_Main`, что считается концом игровой сессии и предложением начать новую. 

После смерти игрок возрождается в `Lvl_Main`, где сможет начать игру заново.

### Прогон по основным механикам

1. Игровое управление
  - Используется шаблон First Person Template;
  - Игрок умеет двигаться, прыгать, стрелять, получать урон, умирать, на HUD показываются здоровье, количество патронов в магазине и в запасе;
2. Процедурная генерация комнат (она инвалид, конечно, но что есть)
  - Количество арен определяется на старте и записывается в GameInstance;
  - Сложность первой комнаты игрок определяет в `Lvl_Main`, после чего для него генерируется комната соответствующей сложности;
  - На нижнем этаже арены есть комната с двумя порталами (для сложного и простого путей);
  - Последняя арена содержит босса, победа над которым переводит игрока обратно в `Lvl_Main`.
3. Враги
  - `BP_Enemy`:
    - Состояние `Patrol`: патрулирует арену по случайным точкам (заданным с помощью `Nav Mesh Bounds Volume`). Работает по умолчанию;
    - Состояние `Chase`: при обнаружении игрока сближается до дистанции стрельбы. Работает, когда игрок достаточно близок, чтобы быть замеченным, но недостаточно близок для стрельбы;
    - Состояние `Attack`: когда враг достаточно приблизился, он останавливается и стреляет;
    - При смерти с него выпадает монетка, иногда может выпасть ящик патронов.
  - `BP_Boss`:
    - Те же состояние, что и `BP_Enemy`, только радиус обнаружения игрока достаточно большой, чтобы босс всегда был хотя бы в состоянии `Chase`.
    - Босс стреляет очередями по три выстрела.
    - Убийство босса выводит победное сообщение и переводит в начало игры.
4. Боевая система
  - Игрок вооружён пистолетом (можно назвать бластером при желании), стреляющим оранжевыми шарами;
  - У игрока есть параметр `Ammo Bank`, отвечающий за количество патронов в запасе. Когда в `Ammo Bank` осталось 0 патронов, бластер не будет перезаряжаться;
  - Попадания по врагам наносят им урон (3 попадания для убийства `BP_Enemy` и 15 для `BP_Boss`);
  - У врагов есть простое состояние: Patrol -> Chase -> Attack (описал в пункте 3).
5. Система валюты
  - После уничтожения врага выпадает Actor монетка `BP_CabbageCoin` (сделал её золотой, материал капусты искать не стал);
  - В правом верхнем углу написано количество $ игрока;
  - Иногда возле порталов встречаются магазины (логика их работы описана в разделе Магазин).
6. Параметры сложности
  - Различие между "обычной" и "сложной" комнатой достигаются через:
    - Количество врагов (вероятность появления на "сложной" больше, теоретически возможно, что в обычной комнате будет больше врагов, чем в сложной, но это маловероятно);
    - Ловушку-лазер на втором этаже, убивающей игрока при прикосновении;
    - Шанс появления торгового автомата (на "сложной" он ниже).
7. Доп. задачи
  Добавил ловушку-лазер.

Спокойной ночи, приятного аппетита, добра и позитива!
